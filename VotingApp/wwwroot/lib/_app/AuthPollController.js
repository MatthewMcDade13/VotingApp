var __awaiter=this&&this.__awaiter||function(t,e,n,r){return new(n||(n=Promise))(function(o,i){function a(t){try{s(r.next(t))}catch(t){i(t)}}function l(t){try{s(r.throw(t))}catch(t){i(t)}}function s(t){t.done?o(t.value):new n(function(e){e(t.value)}).then(a,l)}s((r=r.apply(t,e||[])).next())})},__generator=this&&this.__generator||function(t,e){function n(t){return function(e){return r([t,e])}}function r(n){if(o)throw new TypeError("Generator is already executing.");for(;l;)try{if(o=1,i&&(a=i[2&n[0]?"return":n[0]?"throw":"next"])&&!(a=a.call(i,n[1])).done)return a;switch(i=0,a&&(n=[0,a.value]),n[0]){case 0:case 1:a=n;break;case 4:return l.label++,{value:n[1],done:!1};case 5:l.label++,i=n[1],n=[0];continue;case 7:n=l.ops.pop(),l.trys.pop();continue;default:if(a=l.trys,!(a=a.length>0&&a[a.length-1])&&(6===n[0]||2===n[0])){l=0;continue}if(3===n[0]&&(!a||n[1]>a[0]&&n[1]<a[3])){l.label=n[1];break}if(6===n[0]&&l.label<a[1]){l.label=a[1],a=n;break}if(a&&l.label<a[2]){l.label=a[2],l.ops.push(n);break}a[2]&&l.ops.pop(),l.trys.pop();continue}n=e.call(t,l)}catch(t){n=[6,t],i=0}finally{o=a=0}if(5&n[0])throw n[1];return{value:n[0]?n[1]:void 0,done:!0}}var o,i,a,l={label:0,sent:function(){if(1&a[0])throw a[1];return a[1]},trys:[],ops:[]};return{next:n(0),throw:n(1),return:n(2)}},app;!function(t){!function(t){var e=function(){function t(t,e,n,r){this.$location=t,this.$scope=e,this.parser=n,this.isBusy=!0,this.textAreaIsValid=!0,this.voteOptions="",this.http=r}return t.$inject=["$location","$scope","FormParseService","AppHttpService"],t.prototype.getUserPolls=function(){return __awaiter(this,void 0,void 0,function(){var t,e=this;return __generator(this,function(n){switch(n.label){case 0:return[4,this.http.getUserPolls()];case 1:return t=n.sent(),this.$scope.$apply(function(){e.myPolls=t,e.isBusy=!1}),[2]}})})},t.prototype.createNewPoll=function(){return __awaiter(this,void 0,void 0,function(){var t=this;return __generator(this,function(e){switch(e.label){case 0:return this.parser.parseTextArea(this.voteOptions,this.newPoll)?(this.textAreaIsValid=!0,[4,this.http.createNewPoll(this.newPoll)]):[3,2];case 1:return e.sent(),this.$scope.$apply(function(){t.newPoll=null,t.voteOptions=null,t.$location.path("/#!/mypolls")}),[3,3];case 2:this.textAreaIsValid=!1,e.label=3;case 3:return[2]}})})},t}();e.$inject=["$location","$scope","FormParseService","AppHttpService"],t.AuthPollController=e,angular.module("VotingApp").controller("AuthPollController",e)}(t.controllers||(t.controllers={}))}(app||(app={}));